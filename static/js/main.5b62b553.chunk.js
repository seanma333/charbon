(this.webpackJsonpcharbon=this.webpackJsonpcharbon||[]).push([[0],{31:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(13),r=n.n(s),c=(n(31),n(9)),l=n(10),o=n(12),u=n(11),d=n(59),h=n(54),j=n(56),b=n(55),p=n(57),f=n(16),O=n(20),g=n(58),m=n(25),v=n(1);function x(e,t){return e.id=t+"_"+e.name.toLowerCase().replaceAll(" ","_"),e.hasOwnProperty("choices")?(e.complete=!1,e.choices=e.choices.map((function(e){return e.selected=[],e}))):e.complete=!0,e}function y(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h6",{children:e.title},"title"),Object(v.jsx)(m.Multiselect,{options:e.choices,onSelect:e.onUpdate,onRemove:e.onUpdate,selectionLimit:e.limit,selectedValues:e.preselected,displayValue:"displayName",showCheckbox:!0,avoidHighlightFirstOption:!0,hidePlaceholder:!0},e.id)]})}var k=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).data=a.props.data,a.feature=a.props.feature,a.onUpdate=a.props.onUpdate,a.featureTypes=a.feature.types,a.state={complete:a.complete},a}return Object(l.a)(n,[{key:"updateFeatureState",value:function(){var e=this;this.feature.hasOwnProperty("choices")&&(this.feature.choices.every((function(e){switch(e.type){case"asi":return e.num_abilities===e.selected.length;case"language_proficiency":return e.num_languages===e.selected.length;case"skill_proficiency":return e.num_skills===e.selected.length;case"tool_proficiency":return e.num_tools===e.selected.length;default:return!0}}))?this.feature.complete=!0:this.feature.complete=!1,this.setState((function(t){return t.complete=e.feature.complete,t})),this.props.onUpdate(this.feature))}},{key:"renderChoices",value:function(){var e=this;return this.feature.hasOwnProperty("choices")?0===this.feature.choices.length?Object(v.jsx)("div",{}):this.feature.choices.map((function(t){var n="Select ",a=[],i=null;switch(t.type){case"asi":a=Object.entries(e.data.abilityScores).map((function(e){var t=Object(f.a)(e,2);return{key:t[0],displayName:t[1].name}})).filter((function(e){return!t.excludes.includes(e.key)})),n+=1===(i=t.num_abilities)?"an ability score to increase by "+t.increase:t.num_abilities+" ability scores to increase by "+t.increase;break;case"language_proficiency":a=Object.entries(e.data.languages).map((function(e){var t=Object(f.a)(e,2);return{key:t[0],displayName:t[1].name}})).filter((function(e){return!t.excludes.includes(e.key)})),n+=1===(i=t.num_languages)?"a language":t.num_languages+" languages";break;case"skill_proficiency":a=Object.entries(e.data.skills).map((function(t){var n=Object(f.a)(t,2),a=n[0],i=n[1];return{key:a,displayName:i.name+" ("+e.data.abilityScores[i.ability].shortName+")"}})).filter((function(e){return!t.excludes.includes(e.key)})),n+=1===(i=t.num_skills)?"a skill":t.num_skills+" skills";break;case"tool_proficiency":a=Object.entries(e.data.tools).map((function(e){var t=Object(f.a)(e,2);return{key:t[0],displayName:t[1].name}})).filter((function(e){return!t.excludes.includes(e.key)})),n+=1===(i=t.num_tools)?"a tool":t.num_tools+" tools";break;default:return Object(v.jsx)("div",{})}return Object(v.jsx)(y,{id:e.feature.id,title:n,choices:a,preselected:[],limit:i,onUpdate:function(n){t.selected=n,e.updateFeatureState()}})})):Object(v.jsx)("div",{})}},{key:"render",value:function(){var e=Object(O.a)(this.feature.description),t=this.renderChoices();return Object(v.jsx)("div",{children:Object(v.jsxs)(g.a,{className:"feature-card",children:[Object(v.jsx)(g.a.Title,{children:this.feature.name}),Object(v.jsxs)(g.a.Body,{children:[Object(v.jsx)(h.a,{children:e},"description"),Object(v.jsx)(h.a,{children:t},"choices")]})]})},this.feature.id)}}]),n}(i.a.Component);function S(e){if(null===e.name)return Object(v.jsx)("div",{});var t=Object(O.a)(e.description);return Object(v.jsxs)("div",{className:"description",children:[Object(v.jsx)("h2",{children:e.name}),t]})}function _(e){return e.enabled?Object(v.jsx)(d.a,{className:"saveButton",variant:"primary",onClick:e.onClick,children:e.value}):Object(v.jsx)(d.a,{className:"saveButton",variant:"primary",disabled:!0,children:e.value})}function C(e){var t=e.selected?"primary":"outline-primary";return Object(v.jsx)(d.a,{className:"selector",variant:t,onClick:e.onClick,children:e.value})}function N(e){return Object.keys(e.options).map((function(t){return Object(v.jsx)(h.a,{children:Object(v.jsx)(C,{value:e.options[t].name,selected:t===e.selected,onClick:function(){return e.onClick(t)}})},t)}))}var w=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).originData=e.data,a.featureData=e.featureData,a.availableSuborigins={},a.selectedOriginFeatures=[],a.selectedSuboriginFeatures=[],a.state={selectedOrigin:null,selectedSuborigin:null},a}return Object(l.a)(n,[{key:"selectOrigin",value:function(e){var t=[];null!==e&&this.originData.hasOwnProperty(e)&&(t=this.originData[e].features.map((function(t){return x(t,"origin_"+e)}))),this.selectedOriginFeatures=t,this.originData[e].hasOwnProperty("suborigins")?this.availableSuborigins=this.originData[e].suborigins:this.availableSuborigins={},this.selectedSuboriginFeatures=[],this.setState({selectedOrigin:e,selectSuborigin:null},this.onUpdate)}},{key:"selectSuborigin",value:function(e){var t=[];null!==e&&this.availableSuborigins.hasOwnProperty(e)&&(t=this.availableSuborigins[e].features.map((function(t){return x(t,"suborigin_"+e)}))),this.selectedSuboriginFeatures=t,this.setState({selectedOrigin:this.state.selectedOrigin,selectedSuborigin:e},this.onUpdate)}},{key:"onUpdate",value:function(){this.props.onUpdate({origin:this.state.selectedOrigin,originFeatures:this.selectedOriginFeatures,noSuborigins:0===Object.entries(this.availableSuborigins).length,suborigin:this.state.selectedSuborigin,suboriginFeatures:this.selectedSuboriginFeatures})}},{key:"renderSelected",value:function(){var e=this,t=this.state.selectedOrigin,n=this.state.selectedSuborigin;if(null===t||!(t in this.originData))return Object(v.jsx)("div",{});var a=this.originData[t],i={name:null,description:null};null!==n&&n in a.suborigins&&(i=this.availableSuborigins[n]);var s=this.selectedOriginFeatures.map((function(t){return Object(v.jsx)(h.a,{children:Object(v.jsx)(k,{feature:t,data:e.featureData,onUpdate:function(){return e.onUpdate()}})},t.id)})),r=this.selectedSuboriginFeatures.map((function(t){return Object(v.jsx)(h.a,{children:Object(v.jsx)(k,{feature:t,data:e.featureData,onUpdate:function(){return e.onUpdate()}})},t.id)}));return Object(v.jsxs)("div",{children:[Object(v.jsxs)(h.a,{children:[Object(v.jsx)(b.a,{md:6,children:Object(v.jsx)(S,{name:a.name,description:a.description})}),Object(v.jsx)(b.a,{lg:2}),Object(v.jsxs)(b.a,{lg:4,children:[Object(v.jsx)(h.a,{children:Object(v.jsx)(N,{options:this.availableSuborigins,selected:this.state.selectedSuborigin,onClick:function(t){return e.selectSuborigin(t)}})}),Object(v.jsx)(h.a,{children:Object(v.jsx)(S,{name:i.name,description:i.description})})]})]}),Object(v.jsxs)(h.a,{children:[Object(v.jsx)(b.a,{md:6,children:s}),Object(v.jsx)(b.a,{md:6,children:r})]})]})}},{key:"render",value:function(){var e=this,t=this.renderSelected();return Object(v.jsx)(j.a,{children:Object(v.jsxs)(h.a,{children:[Object(v.jsx)(b.a,{lg:2,children:Object(v.jsx)(N,{options:this.originData,selected:this.state.selectedOrigin,onClick:function(t){return e.selectOrigin(t)}})}),Object(v.jsx)(b.a,{lg:10,children:t})]})})}}]),n}(i.a.Component),F=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).selected=null,a.state={saveable:!1},a}return Object(l.a)(n,[{key:"updateOrigin",value:function(e){var t=!1;console.log(e),this.selected=e,null!==this.selected.origin&&this.selected.originFeatures.every((function(e){return e.complete}))&&(this.selected.noSuborigins||null!==this.selected.suborigin&&this.selected.suboriginFeatures.every((function(e){return e.complete})))&&(t=!0),this.setState({saveable:t})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)(p.a,{className:"creatorStep",size:"lg",show:this.props.show,onHide:this.props.handleClose,scrollable:!0,children:[Object(v.jsx)(p.a.Header,{children:Object(v.jsx)(p.a.Title,{children:"Select Origin"})}),Object(v.jsx)(p.a.Body,{className:"show-grid",children:Object(v.jsx)(w,{data:this.props.data,featureData:this.props.featureData,current:this.props.current,onUpdate:function(t){return e.updateOrigin(t)}})}),Object(v.jsxs)(p.a.Footer,{children:[Object(v.jsx)(d.a,{variant:"secondary",onClick:this.props.handleClose,children:"Close"}),Object(v.jsx)(_,{value:"Save Origin",enabled:this.state.saveable,onClick:this.props.handleSave})]})]})}}]),n}(i.a.Component);function D(e){var t=e.value.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ");switch(e.status){case 1:return Object(v.jsx)(d.a,{className:"stepButton",size:"lg",onClick:function(){return e.onClick()},children:t},e.value);case 2:return Object(v.jsx)(d.a,{className:"stepButton",size:"lg",variant:"success",onClick:function(){return e.onClick()},children:t},e.value);default:return Object(v.jsx)(d.a,{className:"stepButton",size:"lg",disabled:!0,children:t},e.value)}}var U=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=null===this.props.name?"Character Name":this.state.name;return Object(v.jsx)("div",{className:"characterName",children:e})}}]),n}(i.a.Component);function P(e){return Object(v.jsx)(h.a,{})}var B=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).data=a.props.data,a.state={steps:[{name:"origin",status:1},{name:"career",status:0},{name:"abilities",status:0},{name:"class",status:0},{name:"buy_gear",status:0},{name:"level_up",status:0},{name:"next_steps",status:0}],editingName:!1,openStep:null,character:{name:null,age:null,features:[],origin:null,abilities:null,career:null,speed:null,climb_speed:null,fly_speed:null,swim_speed:null,languages:[],natural_armor:10,ac:null,hp:null,senses:[],exploits:null,attacks:["unarmed_strike"],actions:[],bonus_actions:[],reactions:[],saving_throws:[],weapon_proficiencies:["unarmed_strike"],armor_proficiencies:[],skill_proficiencies:[],skill_half_proficiencies:null,skill_expertise:null,tool_proficiencies:[],tool_half_proficiencies:null,tool_expertise:null,augmentations:[]}},a}return Object(l.a)(n,[{key:"editName",value:function(){this.setState((function(e){return e.editingName=!0,e}))}},{key:"openStep",value:function(e){this.setState((function(t){return t.openStep=e,t}))}},{key:"closeStep",value:function(){this.setState((function(e){return e.openStep=!1,e}))}},{key:"render",value:function(){var e=this,t=this.state.steps.map((function(t){return Object(v.jsx)(h.a,{children:Object(v.jsx)(D,{value:t.name,status:t.status,onClick:function(){return e.openStep(t.name)}})},t.name)}));return Object(v.jsx)("div",{children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(h.a,{children:[Object(v.jsx)(b.a,{lg:4,children:t}),Object(v.jsxs)(b.a,{lg:8,children:[Object(v.jsx)(h.a,{children:Object(v.jsx)(U,{name:this.state.character.name,editing:this.state.editingName})}),Object(v.jsx)(h.a,{children:Object(v.jsx)(P,{character:this.state.character})})]})]}),Object(v.jsx)(F,{show:"origin"===this.state.openStep,current:this.state.character,data:this.data.origins,featureData:{abilityScores:this.data.abilityScores,tools:this.data.tools,skills:this.data.skills,languages:this.data.languages},handleClose:function(){return e.closeStep()},handleSave:function(){return e.closeStep()}})]})})}}]),n}(i.a.Component),T=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).snakeToCamel=function(e){return e.replace(/([-_][a-z])/g,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},a.state={loaded:!1},a}return Object(l.a)(n,[{key:"fetchData",value:function(){var e=this;if(!this.state.loaded){this.data={};Promise.all(["ability_scores","ammo","armor","gear","languages","origins","skills","tools","vices","weapons"].map((function(t){return fetch("./json/"+t+".json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(n){return n.json().then((function(n){var a=e.snakeToCamel(t);return e.data[a]=n,!0}))}))}))).then((function(t){e.setState({loaded:!0})}))}}},{key:"render",value:function(){return this.fetchData(),this.state.loaded?Object(v.jsx)(B,{data:this.data}):Object(v.jsx)("div",{children:"LOADING"})}}]),n}(i.a.Component),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};n(51);r.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(T,{})}),document.getElementById("root")),z()}},[[52,1,2]]]);
//# sourceMappingURL=main.5b62b553.chunk.js.map